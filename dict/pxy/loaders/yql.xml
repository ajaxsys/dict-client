<?xml version="1.0" encoding="UTF-8" ?>
<table xmlns="http://query.yahooapis.com/v1/schema/table.xsd">
  <meta>
    <sampleQuery><![CDATA[
      Open:http://developer.yahoo.com/yql/console/
      Copy:
      use "https://raw.github.com/ajaxsys/dict-client/master/dict/pxy/loaders/yql.xml" as html.src;
      select * from html.src where 
        url="http://ja.wikipedia.org/wiki/Yahoo!â€Ž" 
        and xpath='//body'
    ]]></sampleQuery>
    <description>Fetch url HTML</description>
    <author>Andy.fang</author>
  </meta>
  <bindings>
    <select itemPath="result.html" produces="JSON">
      <inputs>
        <key id="url" type="xs:string" paramType="variable" required="true"/>
        <key id="xpath" type="xs:string" paramType="variable" required="true"/>
        <key id="ua" type="xs:string" paramType="variable" required="false"/>
      </inputs>
      <execute><![CDATA[
if (!ua){
  ua = "Mozilla/5.0 (iPhone; CPU iPhone OS 7_0 like Mac OS X) AppleWebKit/537.51.1 (KHTML, like Gecko) Version/7.0 Mobile/11A465 Safari/9537.53";
}
var results = y.query("select * from html where url=@url and xpath=@xpath and ua=@ua", {url:url, xpath:xpath}).results.*;
var html_strings = [];
for each (var item in results) html_strings.push(item.toXMLString());
response.object = {html: html_strings};
]]></execute>
    </select>
  </bindings>
</table>